
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Workflow API Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-git-author/style.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="Graph-Component.html" />
    
    
    <link rel="prev" href="Unified-Views-plugins.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">ATTX Project</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                    Applications and Use Cases
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="Use-case-Infrastructures-and-publications.html">
            
                <a href="Use-case-Infrastructures-and-publications.html">
            
                    
                    UC1 - Infrastructure and Publications
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="Use-case-Jyvaskyla.html">
            
                <a href="Use-case-Jyvaskyla.html">
            
                    
                    UC2 - Parallel Publication Dashboard
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="Use-case-Metax.html">
            
                <a href="Use-case-Metax.html">
            
                    
                    UC3 - Metax
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="ATTX-Architecture-Overview.html">
            
                <a href="ATTX-Architecture-Overview.html">
            
                    
                    ATTX Architecture Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="ATTX-Broker-Deployment.html">
            
                <a href="ATTX-Broker-Deployment.html">
            
                    
                    ATTX Broker Deployment
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" >
            
                <span>
            
                    
                    Run on Single Machine PC/Mac/VM
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1.1" data-path="Building-Docker-application-stacks-in-Swarm-Mode.html">
            
                <a href="Building-Docker-application-stacks-in-Swarm-Mode.html">
            
                    
                    Building Swarm Mode on a PC/Mac
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.2" data-path="Running-the-ATTX-containerised-application-stack-in-your-own-PC-or-Mac.html">
            
                <a href="Running-the-ATTX-containerised-application-stack-in-your-own-PC-or-Mac.html">
            
                    
                    Running the ATTX Stack on a PC/Mac
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.2" >
            
                <span>
            
                    
                    Run on Distributed/Cloud
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.2.1" data-path="Provisioning-ATTX-Components-on-CSC-Open-Stack-cPouta.html">
            
                <a href="Provisioning-ATTX-Components-on-CSC-Open-Stack-cPouta.html">
            
                    
                    Provisioning ATTX Components on CSC Open Stack (cPouta)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.2" data-path="Deploying-ATTX-Components-on-Docker-Swarm.html">
            
                <a href="Deploying-ATTX-Components-on-Docker-Swarm.html">
            
                    
                    Deploying ATTX Components on Docker Swarm
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.3" data-path="Applying-Rolling-Updates-to-services-in-Docker-Swarm.html">
            
                <a href="Applying-Rolling-Updates-to-services-in-Docker-Swarm.html">
            
                    
                    Applying Rolling Updates to Services in Docker Swarm
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="Workflow-Component.html">
            
                <a href="Workflow-Component.html">
            
                    
                    Workflow Component
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="ETL-Artifacts.html">
            
                <a href="ETL-Artifacts.html">
            
                    
                    ETL Artifacts
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="Unified-Views-plugins.html">
            
                <a href="Unified-Views-plugins.html">
            
                    
                    UnifiedViews Plugins
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.5.3" data-path="Workflow-API.html">
            
                <a href="Workflow-API.html">
            
                    
                    Workflow API
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="Graph-Component.html">
            
                <a href="Graph-Component.html">
            
                    
                    Graph Component
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="Graph-Manager-API.html">
            
                <a href="Graph-Manager-API.html">
            
                    
                    Graph Manager API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="Graph-Store.html">
            
                <a href="Graph-Store.html">
            
                    
                    Graph Store
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.2.1" data-path="Data-Model.html">
            
                <a href="Data-Model.html">
            
                    
                    Ontology/Data model
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.2" data-path="Namespaces.html">
            
                <a href="Namespaces.html">
            
                    
                    Graph Namespaces
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.3" data-path="Linking-Strategies.html">
            
                <a href="Linking-Strategies.html">
            
                    
                    Linking Strategies
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="Distribution-Component.html">
            
                <a href="Distribution-Component.html">
            
                    
                    Distribution Component
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="ElasticSearch-with-Siren.html">
            
                <a href="ElasticSearch-with-Siren.html">
            
                    
                    ElasticSearch with Siren
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="ElasticSearch-5.html">
            
                <a href="ElasticSearch-5.html">
            
                    
                    ElasticSearch 5.x
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="ServiceDiscovery-Implementation.html">
            
                <a href="ServiceDiscovery-Implementation.html">
            
                    
                    Service Discovery Implementation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="Consul-for-Service-Discovery-on-Docker-Swarm.html">
            
                <a href="Consul-for-Service-Discovery-on-Docker-Swarm.html">
            
                    
                    Consul for Service Discovery on Docker Swarm
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">User Guide</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="User-Guide-Administrator.html">
            
                <a href="User-Guide-Administrator.html">
            
                    
                    Data Administrator's User guide
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Project Guidelines</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="Feature-roadmap.html">
            
                <a href="Feature-roadmap.html">
            
                    
                    Feature Roadmap
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="Release-Plan.html">
            
                <a href="Release-Plan.html">
            
                    
                    Release Plan
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="Project-Development-Environment.html">
            
                <a href="Project-Development-Environment.html">
            
                    
                    Project Development Environment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="CI-CD-Enviroment.html">
            
                <a href="CI-CD-Enviroment.html">
            
                    
                    CI/CD Enviroment
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.4.1" data-path="Jenkins-CI.html">
            
                <a href="Jenkins-CI.html">
            
                    
                    Jenkins CI
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4.2" data-path="Build-Environment-Setup.html">
            
                <a href="Build-Environment-Setup.html">
            
                    
                    Build Environment Setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4.3" data-path="Containerized-testing.html">
            
                <a href="Containerized-testing.html">
            
                    
                    Containerized Testing
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Project Contributions</li>
        
        
    
        <li class="chapter " data-level="4.1" >
            
                <span>
            
                    
                    Reports
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.1" data-path="CSC-cPouta-Cloud-Services-Report.html">
            
                <a href="CSC-cPouta-Cloud-Services-Report.html">
            
                    
                    CSC cPouta Cloud Services Report
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.2" data-path="Building-with-Gradle.html">
            
                <a href="Building-with-Gradle.html">
            
                    
                    Building with (Py)Gradle
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.3" data-path="Messaging-Brokers-Solutions.html">
            
                <a href="Messaging-Brokers-Solutions.html">
            
                    
                    Messaging Brokers Solutions Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.4" data-path="Service-Discovery-Solutions.html">
            
                <a href="Service-Discovery-Solutions.html">
            
                    
                    Service Discovery Solutions Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.5" data-path="Workflow-Management-Tools.html">
            
                <a href="Workflow-Management-Tools.html">
            
                    
                    Workflow Management Tools Overview
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.2" >
            
                <span>
            
                    
                    Presentations
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.2.1" data-path="ELAG-2017.html">
            
                <a href="ELAG-2017.html">
            
                    
                    ELAG2017
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2.2" data-path="SWIB-2017.html">
            
                <a href="SWIB-2017.html">
            
                    
                    SWIB2017
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="Open-Contributions.html">
            
                <a href="Open-Contributions.html">
            
                    
                    Open Source Contributions
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="5.1" >
            
                <a target="_blank" href="https://www.helsinki.fi/en/projects/attx-2016">
            
                    
                    ATTX website
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Workflow API</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div class="git-author-container git-author-top"><div class="modified">Current page last modified at: 13-Jun-2017 10:51:52</div></div><h1 id="workflow-api">Workflow API</h1>
<!-- TOC START min:1 max:3 link:true update:false -->
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#building-the-wf-api">Building the WF-API</a><ul>
<li><a href="#database-connection">Database Connection</a></li>
</ul>
</li>
<li><a href="#consuming-the-wf-api">Consuming the WF-API</a><ul>
<li><a href="#health-endpoint">health Endpoint</a></li>
<li><a href="#workflow-endpoint">workflow Endpoint</a></li>
<li><a href="#activity-endpoint">activity Endpoint</a></li>
</ul>
</li>
<li><a href="#how-the-information-is-extracted">How the Information is extracted</a></li>
</ul>
<!-- TOC END -->
<h2 id="overview">Overview</h2>
<p>The workflow REST API has two endpoints along with a health check endpoint:</p>
<ul>
<li><code>workflow</code> - retrieve all the workflows and associated steps from the ETL Artifact;</li>
<li><code>activity</code> - retrieve all successfully completed activities and associated datasets from the ETL Artifact;</li>
<li><code>health</code> - checks if the application is running.</li>
</ul>
<p>The general purpose of the workflow API is to provide metadata for workflows and activities such that it exposes information that is according with the <a href="Data-Model.html">Ontology/Data model</a>. Such information could not easily be obtained directly from the <a href="https://grips.semantic-web.at/display/UDDOC/UnifiedViews+REST+API" target="_blank">UnifiedViews REST API</a>. Moreover the configuration necessary to extract this information is encoded in the Pipeline DPU configuration, as depicted in examples below.</p>
<p>Current version: <code>0.1</code> (URL for the endpoint should take into consideration for the API <code>http://host:4301/version/endpoint</code>)</p>
<h2 id="building-the-wf-api">Building the WF-API</h2>
<p>For building the WF-API see:</p>
<ul>
<li><a href="https://github.com/ATTX-project/workflow-component/blob/dev/wf-API/README.md" target="_blank">WF-API source</a> - building both the project and the  Docker image and testing from the source code</li>
<li>short tutorial on <a href="Building-with-Gradle.html">Gradle</a></li>
</ul>
<h3 id="database-connection">Database Connection</h3>
<p>In order to run the tests successfully but also the WF-API successfully one would require an existing MYSQL database connection. Such a connection can be configured in <code>database.conf</code> file.</p>
<p>At the same time it can be troubleshoot using the docker container:</p>
<ul>
<li>connect to the running WF-API Docker container <code>docker exec -it container-id /bin/sh</code> (replace <code>container-id</code> with the ID of the docker container)</li>
<li>run python</li>
<li>in the python shell:<ul>
<li><code>import pymysql as mysql</code></li>
<li><code>mysql.connect(host=&apos;addressOfDBServer&apos;, port=3306, user=&apos;username&apos;, passwd=&apos;password&apos;, db=&apos;database&apos;, charset=&apos;utf8&apos;)</code> - replace the variables in <code>&apos;&apos;</code> with the correct information. Running this command with help with debugging mysql connection issues.</li>
</ul>
</li>
</ul>
<h2 id="consuming-the-wf-api">Consuming the WF-API</h2>
<p>As specified above the workflow API has two endpoints:</p>
<ul>
<li><code>workflow</code> - retrieve all the workflows and associated steps from the ETL Artifact (only GET method possible);</li>
<li><code>activity</code> - retrieve all successfully completed activities and associated datasets from the ETL Artifact (only GET method possible).</li>
<li><code>health</code> - responds with <code>200</code> so that we know the service is alive.</li>
</ul>
<h3 id="health-endpoint">health Endpoint</h3>
<ul>
<li><code>health</code> GET API:<ul>
<li>simple: <a href="http://localhost:4301/health" target="_blank">http://localhost:4301/health</a> responds with <code>200</code> in order for other applications to know the service is running.</li>
</ul>
</li>
</ul>
<h3 id="workflow-endpoint">workflow Endpoint</h3>
<ul>
<li><p><code>workflow</code> GET API:</p>
<ul>
<li>simple: <a href="http://localhost:4301/0.1/workflow" target="_blank">http://localhost:4301/0.1/workflow</a></li>
<li>json-ld output: <a href="http://localhost:4301/0.1/workflow?format=json-ld" target="_blank">http://localhost:4301/0.1/workflow?format=json-ld</a></li>
<li>modifiedSince parameter URL encoded: <a href="http://localhost:4301/0.1/workflow?modifiedSince=2017-01-03T08%3A14%3A14Z" target="_blank">http://localhost:4301/0.1/workflow?modifiedSince=2017-01-03T08%3A14%3A14Z</a> the date-string should be in this format <code>%Y-%m-%dT%H:%M:%SZ</code> e.g. <code>2017-01-03T08:14:14Z</code></li>
<li>all at once: <a href="http://localhost:4301/0.1/workflow?modifiedSince=2017-01-03T08%3A14%3A14Z&amp;format=json-ld" target="_blank">http://localhost:4301/0.1/workflow?modifiedSince=2017-01-03T08%3A14%3A14Z&amp;format=json-ld</a></li>
<li>Responses: if status codes are <code>304</code> No Modified or <code>405</code> Method Not Allowed the response body is empty. If the Response status is <code>200</code> it will return data specific to workflows:</li>
</ul>
<pre><code class="lang-turtle">@base &lt;http://data.hulib.helsinki.fi/attx/&gt; .
@prefix attxonto: &lt;http://data.hulib.helsinki.fi/attx/onto#&gt; .
@prefix attx: &lt;http://data.hulib.helsinki.fi/attx/&gt; .
@prefix owl: &lt;http://www.w3.org/2002/07/owl#&gt; .
@prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt; .
@prefix xml: &lt;http://www.w3.org/XML/1998/namespace&gt; .
@prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; .
@prefix prov: &lt;http://www.w3.org/ns/prov#&gt; .
@prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt; .
@prefix dcterms: &lt;http://purl.org/dc/terms/&gt; .
@prefix sd: &lt;http://www.w3.org/ns/sparql-service-description#&gt; .
@prefix pwo: &lt;http://purl.org/spar/pwo/&gt; .

attx:wf2
  a attxonto:Workflow ;
  dcterms:title &quot;Acquisition and Mapping the VIRTA pubs data with CRIS data.&quot; ;
  dcterms:description &quot;Workflow that uses VIRTA publication data in order to map titles and  identifiers from CRIS data for every publication and research fields.&quot;@en ;
  pwo:hasFirstStep attx:step1 ;
  pwo:hasStep
    attx:wf2_step1 ,
    attx:wf2_step2 ,
    attx:wf2_step3 ,
    attx:wf2_step4 ,
    attx:wf2_step5 .

attx:wf2_step1
  a attxonto:Step ;
  dcterms:title &quot;VIRTA Publication Input Step&quot; ;
  dcterms:description &quot;DPU that gets the latest publication from VIRTA using the file dump.&quot;@en ;
  pwo:hasNextStep attx:wf2_step2 .

attx:wf2_step2
  a attxonto:Step ;
  dcterms:title &quot;CRIS Acquisition Step&quot; ;
  dcterms:description &quot;DPU that acquires CRIS data.&quot;@en ;
  prov:used attx:work2 ;
  pwo:hasNextStep attx:wf2_step3 .

attx:wf2_step3
  a attxonto:Step ;
  dcterms:title &quot;Mapping Step&quot; ;
  dcterms:description &quot;DPU that maps the VIRTA data with CRIS data in order to match titles and identifies from the two data sets.&quot;@en ;
  pwo:hasNextStep attx:wf2_step4 .

attx:wf2_step4
  a attxonto:Step ;
  dcterms:title &quot;Adding wf2 Metadata Step&quot; ;
  dcterms:description &quot;DPU that add necessary Metadata, to the specify provenance information.&quot;@en ;
  pwo:hasNextStep attx:wf2_step5 .

attx:wf2_step5
  a attxonto:Step ;
  dcterms:title &quot;Combined Publication Output Step&quot; ;
  dcterms:description &quot;DPU that that contains the mapped data and writes it to the a file.&quot;@en .
</code></pre>
<h3 id="activity-endpoint">activity Endpoint</h3>
</li>
<li><p><code>activity</code> GET API:</p>
<ul>
<li>simple: <a href="http://localhost:4301/0.1/activity" target="_blank">http://localhost:4301/0.1/activity</a></li>
<li>json-ld output: <a href="http://localhost:4301/0.1/activity?format=json-ld" target="_blank">http://localhost:4301/0.1/activity?format=json-ld</a></li>
<li>modifiedSince parameter URL encoded: <a href="http://localhost:4301/0.1/activity?modifiedSince=2017-01-03T08%3A14%3A14Z" target="_blank">http://localhost:4301/0.1/activity?modifiedSince=2017-01-03T08%3A14%3A14Z</a> the date-string should be in this format <code>%Y-%m-%dT%H:%M:%SZ</code> e.g. <code>2017-01-03T08:14:14Z</code></li>
<li>all at once: <a href="http://localhost:4301/0.1/activity?modifiedSince=2017-01-03T08%3A14%3A14Z&amp;format=json-ld" target="_blank">http://localhost:4301/0.1/activity?modifiedSince=2017-01-03T08%3A14%3A14Z&amp;format=json-ld</a></li>
<li>Responses: if status codes are <code>304</code> No Modified or <code>405</code> Method Not Allowed the response body is empty. If the Response status is <code>200</code> it will return data specific to activites:</li>
</ul>
<pre><code class="lang-turtle">@base &lt;http://data.hulib.helsinki.fi/attx/&gt; .
@prefix attxonto: &lt;http://data.hulib.helsinki.fi/attx/onto#&gt; .
@prefix attx: &lt;http://data.hulib.helsinki.fi/attx/&gt; .
@prefix owl: &lt;http://www.w3.org/2002/07/owl#&gt; .
@prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt; .
@prefix xml: &lt;http://www.w3.org/XML/1998/namespace&gt; .
@prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; .
@prefix prov: &lt;http://www.w3.org/ns/prov#&gt; .
@prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt; .
@prefix dcterms: &lt;http://purl.org/dc/terms/&gt; .
@prefix sd: &lt;http://www.w3.org/ns/sparql-service-description#&gt; .
@prefix pwo: &lt;http://purl.org/spar/pwo/&gt; .

attx:work1
  a attxonto:Dataset, sd:Dataset ;
  dcterms:title &quot;VIRTA Publication Dataset&quot; ;
  dcterms:description &quot;National list of publication that are part of the official VIRTA collection.&quot;@en;
  dcterms:publisher &quot;Ministry of Culture and Education&quot; ;
  dcterms:source &lt;http://virta.fi/data_dump.csv&gt; ; # actual source is a CSV file.
  dcterms:license &lt;http://creativecommons.org/licenses/by/4.0/&gt; .

attx:work2
  a attxonto:Dataset, sd:Dataset ;
  dcterms:title &quot;CRIS Publication Dataset&quot; ;
  dcterms:description &quot;National list of publication that are part of the official CRIS collection.&quot;@en;
  dcterms:publisher &quot;Ministry of Culture and Education&quot; ;
  dcterms:source &lt;http://cris.fi/data_dump.csv&gt; ; # actual source is a CSV file.
  dcterms:license &lt;http://creativecommons.org/licenses/by/4.0/&gt; .

attx:work3
  a attxonto:Dataset, sd:Dataset ;
  dcterms:title &quot;Selected VIRTA Publication Data in RDF&quot; ;
  dcterms:description &quot;Dataset includes titles and external identifiers for every publication and research fields, see mapping steps for details&quot;@en;
  dcterms:license &lt;http://creativecommons.org/licenses/by/4.0/&gt; . # license should be the same as original data

attx:activity2
  a prov:Activity , attxonto:WorkflowExecution ;
  prov:startedAtTime  &quot;2016-11-17T13:02:10+02:00&quot;^^xsd:dateTime ;
  prov:endedAtTime &quot;2016-11-17T13:40:47+02:00&quot;^^xsd:dateTime ;
  prov:qualifiedAssociation [
    a prov:Assocation ;
    prov:agent attx:ETL ;
    prov:hadPlan attx:wf2 ;
  ] ;
  prov:used attx:work1 ;
  prov:used attx:work2 ;
  prov:generated attx:work3 .

# Specific Agent and Artifact information

attx:ETL
  a prov:Agent ;
  attxonto:usesArtifact attx:UnifiedViews.

attx:UnifiedViews
  a attxonto:Artifact ;
  dcterms:source &lt;http://unifiedviews.eu&gt; .
</code></pre>
</li>
<li><code>activity</code> and <code>workflow</code> POST APIs will return <code>405</code> as this operation current is not allowed.</li>
</ul>
<h2 id="how-the-information-is-extracted">How the Information is Extracted</h2>
<p>Extracting information associated to the provenance and workflow information can be classified in three types:</p>
<ul>
<li>Database information related to pipelines and pipeline execution;</li>
<li>ATTX medata DPU plugin - see Example 2;</li>
<li>Other DPU specific information - see Example 1 - such as SPARQL query or SPARQL endpoint.</li>
</ul>
<p>Information specific to workflows and activities is extracted directly from the MySQL database for example activities and associated information are extracted from pipeline executions, however for information related to input and output graphs the <code>attxMetadataPlugin</code> DPU is used as illustrated in Example 2.</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> exec_pipeline.id <span class="hljs-keyword">AS</span> <span class="hljs-string">&apos;activityId&apos;</span>,
ppl_model.id <span class="hljs-keyword">AS</span> <span class="hljs-string">&apos;workflowId&apos;</span>,
exec_pipeline.t_start <span class="hljs-keyword">AS</span> <span class="hljs-string">&apos;activityStart&apos;</span>,
exec_pipeline.t_end <span class="hljs-keyword">AS</span> <span class="hljs-string">&apos;activityEnd&apos;</span>,
exec_pipeline.t_end <span class="hljs-keyword">AS</span> <span class="hljs-string">&apos;lastChange&apos;</span>
<span class="hljs-keyword">FROM</span> exec_pipeline, ppl_model
<span class="hljs-keyword">WHERE</span> exec_pipeline.pipeline_id = ppl_model.id <span class="hljs-keyword">AND</span>\
exec_pipeline.status = <span class="hljs-number">5</span>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> ppl_model.id
</code></pre>
<p>As depicted in the examples below often html tags are encoded and even more so the tags within them are encoded a second time, thus making it difficult to extract the required information.</p>
<p>Example 1: SPARQL endpoint configuration</p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-name">object-stream</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">MasterConfigObject</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">configurations</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">entry</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>dpu_config<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">object-stream</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">eu.unifiedviews.plugins.extractor.sparqlendpoint.SparqlEndpointConfig__V1</span>&gt;</span>
    &amp;lt;endpoint&amp;gt;http://dbpedia.org/sparql&amp;lt;/endpoint&amp;gt;
    &amp;lt;query&gt;PREFIX  dbo:  &amp;amp;lt;http://dbpedia.org/ontology/&amp;amp;gt;
PREFIX  dbp:  &amp;amp;lt;http://dbpedia.org/property/&amp;amp;gt;
PREFIX yago:    &amp;amp;lt;http://dbpedia.org/class/yago/&amp;amp;gt;
PREFIX fi:  &amp;amp;lt;http://helsinki.fi/example&amp;amp;gt;
CONSTRUCT {
           ?subject fi:hasName ?name.
           ?subject fi:hasOccupation ?occupation.
}
  WHERE
    {
      ?subject   a  dbo:Person;
      dbp:name  ?name ;
     dbo:occupation ?occupation.
     FILTER (regex(?name, &amp;amp;quot;Stefan&amp;amp;quot; ))
   }
Limit 100  &amp;lt;/query&amp;gt;
  <span class="hljs-tag">&lt;/<span class="hljs-name">eu.unifiedviews.plugins.extractor.sparqlendpoint.SparqlEndpointConfig__V1</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">object-stream</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">entry</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">entry</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>addon/faultToleranceWrap<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">object-stream</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">eu.unifiedviews.helpers.dpu.extension.faulttolerance.FaultTolerance_-Configuration__V1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">enabled</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">enabled</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">exceptionNames</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&amp;quot;linked-list&amp;quot;/</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">maxRetryCount</span>&gt;</span>-1<span class="hljs-tag">&lt;/<span class="hljs-name">maxRetryCount</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">eu.unifiedviews.helpers.dpu.extension.faulttolerance.FaultTolerance_-Configuration__V1</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">object-stream</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">entry</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">configurations</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">MasterConfigObject</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">object-stream</span>&gt;</span>
</code></pre>
<p>Using the ATTX metadata plugin (see information at: <a href="Unified-Views-plugins.html">UnifiedViews plugins</a>)
Example 2: ATTX metadata configuration</p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-name">object-stream</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">MasterConfigObject</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">configurations</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">entry</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>dpu_config<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">object-stream</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">org.uh.attx.etl.uv.dpu.transformer.metadata.TransformerATTXMetadataConfig__V1</span>&gt;</span>
&amp;lt;inputGraphURI&amp;gt;http://helsinki.fi/library/onto#dataset1&amp;lt;/inputGraphURI&amp;gt; &amp;lt;inputGraphTitle&amp;gt;Dbpedia&amp;lt;/inputGraphTitle&amp;gt;
                    &amp;lt;inputGraphDescription&amp;gt;Sparql Endpoint Dbpedia specific query&amp;lt;/inputGraphDescription&amp;gt; &amp;lt;inputGraphPublisher&amp;gt;Dbpedia&amp;lt;/inputGraphPublisher&amp;gt; &amp;lt;inputGraphSource&amp;gt;http://dbpedia.org/sparql&amp;lt;/inputGraphSource&amp;gt;
                    &amp;lt;inputGraphLicence&amp;gt;http://creativecommons.org/licenses/by-sa/3.0/&amp;lt;/inputGraphLicence&amp;gt; &amp;lt;outputGraphURI&amp;gt;http://helsinki.fi/library/onto#dataset2&amp;lt;/outputGraphURI&amp;gt; &amp;lt;outputGraphTitle&amp;gt;Testing specific output&amp;lt;/outputGraphTitle&amp;gt;
                    &amp;lt;outputGraphDescription&amp;gt;Test Data&amp;lt;/outputGraphDescription&amp;gt; &amp;lt;outputGraphPublisher&amp;gt;http://helsinki.fi/library&amp;lt;/outputGraphPublisher&amp;gt; &amp;lt;outputGraphSource&amp;gt;http://helsinki.fi/library&amp;lt;/outputGraphSource&amp;gt;
                    &amp;lt;outputGraphLicence&amp;gt;http://creativecommons.org/licenses/by-sa/3.0/&amp;lt;/outputGraphLicence&amp;gt; <span class="hljs-tag">&lt;/<span class="hljs-name">org.uh.attx.etl.uv.dpu.transformer.metadata.TransformerATTXMetadataConfig__V1</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">object-stream</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">entry</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">configurations</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">MasterConfigObject</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">object-stream</span>&gt;</span>
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="Unified-Views-plugins.html" class="navigation navigation-prev " aria-label="Previous page: UnifiedViews Plugins">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="Graph-Component.html" class="navigation navigation-next " aria-label="Next page: Graph Component">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Workflow API","level":"1.5.3","depth":2,"next":{"title":"Graph Component","level":"1.6","depth":1,"path":"Graph-Component.md","ref":"Graph-Component.md","articles":[{"title":"Graph Manager API","level":"1.6.1","depth":2,"path":"Graph-Manager-API.md","ref":"Graph-Manager-API.md","articles":[]},{"title":"Graph Store","level":"1.6.2","depth":2,"path":"Graph-Store.md","ref":"Graph-Store.md","articles":[{"title":"Ontology/Data model","level":"1.6.2.1","depth":3,"path":"Data-Model.md","ref":"Data-Model.md","articles":[]},{"title":"Graph Namespaces","level":"1.6.2.2","depth":3,"path":"Namespaces.md","ref":"Namespaces.md","articles":[]},{"title":"Linking Strategies","level":"1.6.2.3","depth":3,"path":"Linking-Strategies.md","ref":"Linking-Strategies.md","articles":[]}]}]},"previous":{"title":"UnifiedViews Plugins","level":"1.5.2","depth":2,"path":"Unified-Views-plugins.md","ref":"Unified-Views-plugins.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["highlight","fontsettings","search","git-author","gitversion"],"pluginsConfig":{"gitversion":{},"git-author":{"position":"top","modifyTpl":"Current page last modified at: {timeStamp}","createTpl":false,"timeStampFormat":"DD-MMM-YYYY HH:mm:ss"},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"family":"sans","size":2,"theme":"white"},"fontSettings":{"size":1},"highlight":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"Workflow-API.md","mtime":"2017-06-19T07:28:53.370Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-06-19T07:30:52.336Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    

    </body>
</html>

