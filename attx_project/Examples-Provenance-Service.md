# Provenance Service Examples

### Table of Contents
<!-- TOC START min:1 max:3 link:true update:false -->
  - [Generating Provenance Information](#generating-provenance-information)
    - [**Step 1a** workflow-started-prov](#step-1a-workflow-started-prov)
    - [**Step 1b** harvestData-prov](#step-1b-harvestdata-prov)
    - [**Step 2** transformToRDF-prov](#step-2-transformtordf-prov)
    - [**Step 2 - REPLY**](#step-2---reply)
    - [**Step 3a** replaceDataset-prov](#step-3a-replacedataset-prov)
    - [**Step 3b**](#step-3b)
    - [**Step 3 - REPLY**](#step-3---reply)
    - [**Step 4**](#step-4)
<!-- TOC END -->

## Generating Provenance Information

The sequence of messages below are meant to illustrate a series of services that communicate between each other and the provenance related messages are captured and converted to RDF (and illustrated for each message in Turtle format).

### **Step 1a** workflow-started-prov
```json
{
    "provenance": {
        "context": {
          "workflowID": "ingestionwf",
          "activityID": "1"

        },
        "agent": {
          "ID": "UV",
          "role": "ETL"
        },
        "activity": {
            "title": "Ingestion workflow",
            "type": "WorkflowExecution",
            "startTime": "2017-08-02T13:52:29+02:00"
        },
        "input": [
          {
            "key": "inputDataset",
            "role": "Dataset"
          }
        ],
        "output": [
          {
            "key": "outputDataset",
            "role": "Dataset"
          }
        ]
    },
    "payload": {
        "inputDataset": "http://dataset/1",
        "outputDataset": "http://dataset/2"
    }
}
```
Result in TURTLE format:
```turtle
attx:workflowingestionwf_activity1_UV a attxonto:WorkflowExecution,
        prov:Activity ;
    rdfs:label "Ingestion workflow" ;
    dcterms:title "Ingestion workflow" ;
    prov:generated attx:entity_aa9141aea2522cb9c0aa31c4018120f0 ;
    prov:qualifiedAssociation attx:workflowingestionwf_activity1_association_8f964bd174e90db0b452e67f98948c42 ;
    prov:qualifiedGeneration attx:generated_a3093d1453162b225042a60cfe4fb9f0 ;
    prov:qualifiedUsage attx:used_31f60735f63a5919b7133ec06f759862 ;
    prov:startedAtTime "2017-08-02T13:52:29+02:00"^^xsd:dateTime ;
    prov:used attx:entity_70935fe6854d194192d4df4b5af7295d ;
    prov:wasAssociatedWith attx:UV .

attx:ETL a prov:Role ;
    rdfs:label "ETL" .

attx:generated_a3093d1453162b225042a60cfe4fb9f0 a prov:Generation ;
    rdfs:comment "Generated by: workflowingestionwf_activity1" ;
    prov:entity attx:entity_aa9141aea2522cb9c0aa31c4018120f0 ;
    prov:hadRole attx:Dataset .

attx:used_31f60735f63a5919b7133ec06f759862 a prov:Usage ;
    rdfs:comment "Used by: workflowingestionwf_activity1" ;
    prov:entity attx:entity_70935fe6854d194192d4df4b5af7295d ;
    prov:hadRole attx:Dataset .

attx:workflowingestionwf_activity1_association_8f964bd174e90db0b452e67f98948c42 a prov:Association ;
    prov:agent attx:UV ;
    prov:hadPlan attx:workflowingestionwf_activity1 ;
    prov:hadRole attx:ETL .

attx:Dataset a prov:Role ;
    rdfs:label "Dataset" .

attx:UV a attxonto:Artifact,
        prov:Agent ;
    rdfs:label "UV" .

attx:entity_70935fe6854d194192d4df4b5af7295d a prov:Entity ;
    dcterms:source "http://dataset/1" ;
    rdfs:comment "Used Dataset" .

attx:entity_aa9141aea2522cb9c0aa31c4018120f0 a prov:Entity ;
    dcterms:source "http://dataset/2" ;
    rdfs:comment "Generated Dataset" .


```


### **Step 1b** harvestData-prov
```json
{
    "provenance": {
        "context": {
          "workflowID": "ingestionwf",
          "activityID": "1",
          "stepID": "harvestData"
        },
        "agent": {
          "ID": "UV",
          "role": "ETL"      
        },  
        "activity": {
            "title": "Harvest data",
            "type": "StepExecution",
            "startTime": "2017-08-02T13:52:29+02:00",
            "endTime": "2017-08-02T13:52:29+02:00",
            "status": "SUCCESS"
        },
        "input": [
          {
            "key": "harvestConfiguration",
            "role": "StepConfiguration"
          }
        ],
        "output": [
          {
            "key": "harvestedContent",
            "role": "DatasetContent"
          }
        ]       
    },
    "payload": {
        "harvestConfiguration": {
            "uri": "http://data.com/api",
            "endpoint": "/stocks",
            "query": "*"            
        },
		"harvestedContent": "data"
    }
}
```
Result in TURTLE format:
```turtle
attx:workflowingestionwf_activity1 a attxonto:Workflow,
        prov:Plan ;
    rdfs:label "Workflow: workflowingestionwf_activity1" ;
    pwo:hasStep attx:workflowingestionwf_activity1_stepharvestData_UV .

attx:DatasetContent a prov:Role ;
    rdfs:label "DatasetContent" .

attx:ETL a prov:Role ;
    rdfs:label "ETL" .

attx:StepConfiguration a prov:Role ;
    rdfs:label "StepConfiguration" .

attx:generated_2ae708dee541e1ee4b48b2cccb356c7b a prov:Generation ;
    rdfs:comment "Generated by: workflowingestionwf_activity1_stepharvestData" ;
    prov:entity attx:entity_8d777f385d3dfec8815d20f7496026dc ;
    prov:hadRole attx:DatasetContent .

attx:used_7a5b400c88847661673a53f339cc5556 a prov:Usage ;
    rdfs:comment "Used by: workflowingestionwf_activity1_stepharvestData" ;
    prov:entity attx:entity_df59c30a12794c8b82f4a89d680f0275 ;
    prov:hadRole attx:StepConfiguration .

attx:workflowingestionwf_activity1_association_9cf07b13957d30c1dff6f6a88126cb4b a prov:Association ;
    prov:agent attx:UV ;
    prov:hadRole attx:ETL .

attx:workflowingestionwf_activity1_stepharvestData_UV a attxonto:StepExecution,
        prov:Activity ;
    rdfs:label "Harvest data" ;
    attxonto:hasStatus "SUCCESS" ;
    dcterms:title "Harvest data" ;
    prov:endedAtTime "2017-08-02T13:52:29+02:00"^^xsd:dateTime ;
    prov:generated attx:entity_8d777f385d3dfec8815d20f7496026dc ;
    prov:qualifiedAssociation attx:workflowingestionwf_activity1_association_9cf07b13957d30c1dff6f6a88126cb4b ;
    prov:qualifiedGeneration attx:generated_2ae708dee541e1ee4b48b2cccb356c7b ;
    prov:qualifiedUsage attx:used_7a5b400c88847661673a53f339cc5556 ;
    prov:startedAtTime "2017-08-02T13:52:29+02:00"^^xsd:dateTime ;
    prov:used attx:entity_df59c30a12794c8b82f4a89d680f0275 ;
    prov:wasAssociatedWith attx:UV .

attx:UV a attxonto:Artifact,
        prov:Agent ;
    rdfs:label "UV" .

attx:entity_8d777f385d3dfec8815d20f7496026dc a prov:Entity ;
    dcterms:source "data" ;
    rdfs:comment "Generated Dataset" .

attx:entity_df59c30a12794c8b82f4a89d680f0275 a prov:Entity ;
    dcterms:source "{u'query': u'*', u'endpoint': u'/stocks', u'uri': u'http://data.com/api'}" ;
    rdfs:comment "Used Dataset" .
```


### **Step 2** transformToRDF-prov
```json
{
    "provenance": {
        "context": {
            "workflowID": "ingestionwf",
            "activityID": 1,
            "stepID": "tranformToRDF"
        },
        "agent": {
            "ID": "UV",
            "role": "ETL"
        },
        "activity": {
            "title": "Transform to RDF",
            "type": "StepExecution",
            "startTime": "2017-08-02T13:52:29+02:00",
            "endTime": "2017-08-02T13:52:29+02:00",
            "status": "SUCCESS",
            "communication": [{
                "agent": "RMLService",
                "role": "transformer",
                "input": []
            }]
        },

        "input": [{
            "key": "harvestedContent",
            "role": "Dataset"
        }],
        "output": [{
            "key": "transformerData",
            "role": "tempDataset"
        }]
    },
    "payload": {
			"harvestedContent": "data",
			"transformerData": "data"
		}
}
```
Result in TURTLE format:
```turtle
attx:workflowingestionwf_activity1 a attxonto:Workflow,
        prov:Plan ;
    rdfs:label "Workflow: workflowingestionwf_activity1" ;
    pwo:hasStep attx:workflowingestionwf_activity1_steptranformToRDF_UV .

attx:Dataset a prov:Role ;
    rdfs:label "Dataset" .

attx:ETL a prov:Role ;
    rdfs:label "ETL" .

attx:RMLService a attxonto:Artifact,
        prov:Agent ;
    rdfs:label "RMLService" .

attx:generated_c7b62061463cb9e158ec6354896570bb a prov:Generation ;
    rdfs:comment "Generated by: workflowingestionwf_activity1_steptranformToRDF" ;
    prov:entity attx:entity_8d777f385d3dfec8815d20f7496026dc ;
    prov:hadRole attx:tempDataset .

attx:tempDataset a prov:Role ;
    rdfs:label "tempDataset" .

attx:transformer a prov:Role .

attx:used_2ae708dee541e1ee4b48b2cccb356c7b a prov:Usage ;
    rdfs:comment "Used by: workflowingestionwf_activity1_steptranformToRDF" ;
    prov:entity attx:entity_8d777f385d3dfec8815d20f7496026dc ;
    prov:hadRole attx:Dataset .

attx:workflowingestionwf_activity1_association_9cf07b13957d30c1dff6f6a88126cb4b a prov:Association ;
    prov:agent attx:UV ;
    prov:hadRole attx:ETL .

attx:workflowingestionwf_activity1_steptranformToRDF_RMLService a prov:Activity ;
    prov:wasAssociatedWith attx:RMLService .

attx:workflowingestionwf_activity1_steptranformToRDF_UV a attxonto:StepExecution,
        prov:Activity ;
    rdfs:label "Transform to RDF" ;
    attxonto:hasStatus "SUCCESS" ;
    dcterms:title "Transform to RDF" ;
    prov:endedAtTime "2017-08-02T13:52:29+02:00"^^xsd:dateTime ;
    prov:generated attx:entity_8d777f385d3dfec8815d20f7496026dc ;
    prov:qualifiedAssociation attx:workflowingestionwf_activity1_association_9cf07b13957d30c1dff6f6a88126cb4b ;
    prov:qualifiedCommunication [ a prov:Communication ;
            prov:activity attx:workflowingestionwf_activity1_steptranformToRDF_RMLService ;
            prov:hadRole attx:transformer ] ;
    prov:qualifiedGeneration attx:generated_c7b62061463cb9e158ec6354896570bb ;
    prov:qualifiedUsage attx:used_2ae708dee541e1ee4b48b2cccb356c7b ;
    prov:startedAtTime "2017-08-02T13:52:29+02:00"^^xsd:dateTime ;
    prov:used attx:entity_8d777f385d3dfec8815d20f7496026dc ;
    prov:wasAssociatedWith attx:UV .

attx:UV a attxonto:Artifact,
        prov:Agent ;
    rdfs:label "UV" .

attx:entity_8d777f385d3dfec8815d20f7496026dc a prov:Entity ;
    dcterms:source "data" ;
    rdfs:comment "Generated Dataset",
        "Used Dataset" .
```

### **Step 2 - REPLY**
```json
{
    "provenance": {
        "context": {
            "workflowID": "ingestionwf",
            "activityID": 1,
            "stepID": "tranformToRDF"
        },
        "agent": {
            "ID": "RMLService",
            "role": "transformer"
        },
        "activity": {
            "title": "Transform Data",
            "type": "ServiceExecution",
            "startTime": "2017-08-02T13:52:29+02:00",
            "endTime": "2017-08-02T13:52:29+02:00",
            "status": "SUCCESS"
        },
        "input": [
          {
            "key": "inputGraphs",
            "role": "inputGraphs"
          }
        ],
        "output": [
          {
            "key": "transformerData",
            "role": "tempDataset"
          }
        ]                        
    },
    "payload": {
        "inputGraphs": "attx:dataset1",
        "transformerData": "attx:tempDataset"
    }
}
```
Result in TURTLE format:
```turtle
attx:workflowingestionwf_activity1_steptranformToRDF_RMLService a attxonto:ServiceExecution,
        prov:Activity ;
    rdfs:label "Transform Data" ;
    attxonto:hasStatus "SUCCESS" ;
    dcterms:title "Transform Data" ;
    prov:endedAtTime "2017-08-02T13:52:29+02:00"^^xsd:dateTime ;
    prov:generated attx:entity_292d4e619bb8f7c8341cbfae46c9060c ;
    prov:qualifiedAssociation attx:workflowingestionwf_activity1_association_01ed3446f49064dc2e2995af157ece48 ;
    prov:qualifiedGeneration attx:generated_f944cada0b5111516d27dc7d7c680e60 ;
    prov:qualifiedUsage attx:used_b102084457a866dfd3194408cfa46805 ;
    prov:startedAtTime "2017-08-02T13:52:29+02:00"^^xsd:dateTime ;
    prov:used attx:entity_9ed9b35e41785b2860d85be01da32841 ;
    prov:wasAssociatedWith attx:RMLService .

attx:generated_f944cada0b5111516d27dc7d7c680e60 a prov:Generation ;
    rdfs:comment "Generated by: workflowingestionwf_activity1_steptranformToRDF" ;
    prov:entity attx:entity_292d4e619bb8f7c8341cbfae46c9060c ;
    prov:hadRole attx:tempDataset .

attx:inputGraphs a prov:Role ;
    rdfs:label "inputGraphs" .

attx:tempDataset a prov:Role ;
    rdfs:label "tempDataset" .

attx:transformer a prov:Role ;
    rdfs:label "transformer" .

attx:used_b102084457a866dfd3194408cfa46805 a prov:Usage ;
    rdfs:comment "Used by: workflowingestionwf_activity1_steptranformToRDF" ;
    prov:entity attx:entity_9ed9b35e41785b2860d85be01da32841 ;
    prov:hadRole attx:inputGraphs .

attx:workflowingestionwf_activity1_association_01ed3446f49064dc2e2995af157ece48 a prov:Association ;
    prov:agent attx:RMLService ;
    prov:hadRole attx:transformer .

attx:RMLService a attxonto:Artifact,
        prov:Agent ;
    rdfs:label "RMLService" .

attx:entity_292d4e619bb8f7c8341cbfae46c9060c a prov:Entity ;
    dcterms:source "attx:tempDataset" ;
    rdfs:comment "Generated Dataset" .

attx:entity_9ed9b35e41785b2860d85be01da32841 a prov:Entity ;
    dcterms:source "attx:dataset1" ;
    rdfs:comment "Used Dataset" .
```

### **Step 3a** replaceDataset-prov
```json
{
    "provenance": {
        "context": {
          "workflowID": "ingestionwf",
          "activityID": 1,
          "stepID": "replaceds"
        },
        "agent": {
          "ID": "UV",
          "role": "ETL"
        },
        "activity": {
            "title": "Replace content of the existing dataset",
            "type": "StepExecution",
            "startTime": "2017-08-02T13:52:29+02:00",
            "endTime": "2017-08-02T13:52:29+02:00",
            "description": "something peachy",
            "status": "SUCCESS",
            "communication": [
                {
                    "agent": "GMAPI" ,
                    "role": "storage",
                        "input": [ {
                           "key": "transformerData",
                           "role": "tempDataset"
                         }]
        }]},
        "input": [
          {
            "key": "transformerData",
            "role": "tempDataset"
          }
        ],
        "output": [
          {
            "key": "outputDataset",
            "role": "Dataset"
          }
        ]
    },
   "payload": {
       "transformerData": "attx:tempDataset",
       "outputDataset": "http://dataset/2"
   }
}
```
Result in TURTLE format:
```turtle
attx:workflowingestionwf_activity1 a attxonto:Workflow,
        prov:Plan ;
    rdfs:label "Workflow: workflowingestionwf_activity1" ;
    pwo:hasStep attx:workflowingestionwf_activity1_stepreplaceds_UV .

attx:Dataset a prov:Role ;
    rdfs:label "Dataset" .

attx:ETL a prov:Role ;
    rdfs:label "ETL" .

attx:GMAPI a attxonto:Artifact,
        prov:Agent ;
    rdfs:label "GMAPI" .

attx:generated_a3093d1453162b225042a60cfe4fb9f0 a prov:Generation ;
    rdfs:comment "Generated by: workflowingestionwf_activity1_stepreplaceds" ;
    prov:entity attx:entity_aa9141aea2522cb9c0aa31c4018120f0 ;
    prov:hadRole attx:Dataset .

attx:storage a prov:Role .

attx:tempDataset a prov:Role ;
    rdfs:label "tempDataset" .

attx:used_f944cada0b5111516d27dc7d7c680e60 a prov:Usage ;
    rdfs:comment "Used by: workflowingestionwf_activity1_stepreplaceds" ;
    prov:entity attx:entity_292d4e619bb8f7c8341cbfae46c9060c ;
    prov:hadRole attx:tempDataset .

attx:workflowingestionwf_activity1_association_9cf07b13957d30c1dff6f6a88126cb4b a prov:Association ;
    prov:agent attx:UV ;
    prov:hadRole attx:ETL .

attx:workflowingestionwf_activity1_stepreplaceds_GMAPI a prov:Activity ;
    prov:qualifiedUsage [ a prov:Usage ;
            prov:entity attx:entity_292d4e619bb8f7c8341cbfae46c9060c ;
            prov:hadRole attx:workflowingestionwf_activity1_tempDataset ] ;
    prov:used attx:entity_292d4e619bb8f7c8341cbfae46c9060c ;
    prov:wasAssociatedWith attx:GMAPI .

attx:workflowingestionwf_activity1_stepreplaceds_UV a attxonto:StepExecution,
        prov:Activity ;
    rdfs:label "Replace content of the existing dataset" ;
    attxonto:hasStatus "SUCCESS" ;
    dcterms:description "something peachy" ;
    dcterms:title "Replace content of the existing dataset" ;
    prov:endedAtTime "2017-08-02T13:52:29+02:00"^^xsd:dateTime ;
    prov:generated attx:entity_aa9141aea2522cb9c0aa31c4018120f0 ;
    prov:qualifiedAssociation attx:workflowingestionwf_activity1_association_9cf07b13957d30c1dff6f6a88126cb4b ;
    prov:qualifiedCommunication [ a prov:Communication ;
            prov:activity attx:workflowingestionwf_activity1_stepreplaceds_GMAPI ;
            prov:hadRole attx:storage ] ;
    prov:qualifiedGeneration attx:generated_a3093d1453162b225042a60cfe4fb9f0 ;
    prov:qualifiedUsage attx:used_f944cada0b5111516d27dc7d7c680e60 ;
    prov:startedAtTime "2017-08-02T13:52:29+02:00"^^xsd:dateTime ;
    prov:used attx:entity_292d4e619bb8f7c8341cbfae46c9060c ;
    prov:wasAssociatedWith attx:UV .

attx:workflowingestionwf_activity1_tempDataset a prov:Role ;
    rdfs:label "tempDataset" .

attx:UV a attxonto:Artifact,
        prov:Agent ;
    rdfs:label "UV" .

attx:entity_aa9141aea2522cb9c0aa31c4018120f0 a prov:Entity ;
    dcterms:source "http://dataset/2" ;
    rdfs:comment "Generated Dataset" .

attx:entity_292d4e619bb8f7c8341cbfae46c9060c a prov:Entity ;
    dcterms:source "attx:tempDataset" ;
    rdfs:comment "Used Dataset" .
```


### **Step 3b**
```json
{
    "provenance": {
        "context": {
          "workflowID": "ingestionwf",
          "activityID": 1

        },
        "agent": {
          "ID": "UV",
          "role": "ETL"      
        },  
        "activity": {
            "title": "Ingestion workflow",
            "type": "WorkflowExecution",
            "endTime": "2017-08-02T13:52:29+02:00"
        },
        "input": [
          {
            "key": "inputDataset",
            "role": "Dataset"
          }
        ],
        "output": [
          {
            "key": "outputDataset",
            "role": "Dataset"
          }
        ]                                         
    },
    "payload": {
        "inputDataset": "http://dataset/1",
        "outputDataset": "http://dataset/2"
    }
}
```
Result in TURTLE format:
```turtle
attx:workflowingestionwf_activity1_UV a attxonto:WorkflowExecution,
        prov:Activity ;
    rdfs:label "Ingestion workflow" ;
    dcterms:title "Ingestion workflow" ;
    prov:endedAtTime "2017-08-02T13:52:29+02:00"^^xsd:dateTime ;
    prov:generated attx:entity_aa9141aea2522cb9c0aa31c4018120f0 ;
    prov:qualifiedAssociation attx:workflowingestionwf_activity1_association_8f964bd174e90db0b452e67f98948c42 ;
    prov:qualifiedGeneration attx:generated_a3093d1453162b225042a60cfe4fb9f0 ;
    prov:qualifiedUsage attx:used_31f60735f63a5919b7133ec06f759862 ;
    prov:used attx:entity_70935fe6854d194192d4df4b5af7295d ;
    prov:wasAssociatedWith attx:UV .

attx:ETL a prov:Role ;
    rdfs:label "ETL" .

attx:generated_a3093d1453162b225042a60cfe4fb9f0 a prov:Generation ;
    rdfs:comment "Generated by: workflowingestionwf_activity1" ;
    prov:entity attx:entity_aa9141aea2522cb9c0aa31c4018120f0 ;
    prov:hadRole attx:Dataset .

attx:used_31f60735f63a5919b7133ec06f759862 a prov:Usage ;
    rdfs:comment "Used by: workflowingestionwf_activity1" ;
    prov:entity attx:entity_70935fe6854d194192d4df4b5af7295d ;
    prov:hadRole attx:Dataset .

attx:workflowingestionwf_activity1_association_8f964bd174e90db0b452e67f98948c42 a prov:Association ;
    prov:agent attx:UV ;
    prov:hadPlan attx:workflowingestionwf_activity1 ;
    prov:hadRole attx:ETL .

attx:Dataset a prov:Role ;
    rdfs:label "Dataset" .

attx:UV a attxonto:Artifact,
        prov:Agent ;
    rdfs:label "UV" .

attx:entity_70935fe6854d194192d4df4b5af7295d a prov:Entity ;
    dcterms:source "http://dataset/1" ;
    rdfs:comment "Used Dataset" .

attx:entity_aa9141aea2522cb9c0aa31c4018120f0 a prov:Entity ;
    dcterms:source "http://dataset/2" ;
    rdfs:comment "Generated Dataset" .
```

### **Step 3 - REPLY**
```json
{
    "provenance": {
        "context": {
            "workflowID": "ingestionwf",
            "activityID": 1,
            "stepID": "replaceds"
        },
        "agent": {
            "ID": "GMAPI",
            "role": "storage"
        },
        "activity": {
            "title": "Store data in the graph",
            "type": "ServiceExecution",
            "startTime": "2017-08-02T13:52:29+02:00",
            "endTime": "2017-08-02T13:52:29+02:00",
            "status": "SUCCESS"
        },
        "input": [
          {
            "key": "inputGraphs",
            "role": "inputGraphs"
          }
        ]        
    },
    "payload": {
        "inputGraphs": "attx:dataset1"
    }
}
```
Result in TURTLE format:
```turtle
attx:workflowingestionwf_activity1_stepreplaceds_GMAPI a attxonto:ServiceExecution,
        prov:Activity ;
    rdfs:label "Store data in the graph" ;
    attxonto:hasStatus "SUCCESS" ;
    dcterms:title "Store data in the graph" ;
    prov:endedAtTime "2017-08-02T13:52:29+02:00"^^xsd:dateTime ;
    prov:qualifiedAssociation attx:workflowingestionwf_activity1_association_1a7661cb146d8eabc4b156414840585a ;
    prov:qualifiedUsage attx:used_b102084457a866dfd3194408cfa46805 ;
    prov:startedAtTime "2017-08-02T13:52:29+02:00"^^xsd:dateTime ;
    prov:used attx:entity_9ed9b35e41785b2860d85be01da32841 ;
    prov:wasAssociatedWith attx:GMAPI .

attx:inputGraphs a prov:Role ;
    rdfs:label "inputGraphs" .

attx:storage a prov:Role ;
    rdfs:label "storage" .

attx:used_b102084457a866dfd3194408cfa46805 a prov:Usage ;
    rdfs:comment "Used by: workflowingestionwf_activity1_stepreplaceds" ;
    prov:entity attx:entity_9ed9b35e41785b2860d85be01da32841 ;
    prov:hadRole attx:inputGraphs .

attx:workflowingestionwf_activity1_association_1a7661cb146d8eabc4b156414840585a a prov:Association ;
    prov:agent attx:GMAPI ;
    prov:hadRole attx:storage .

attx:GMAPI a attxonto:Artifact,
        prov:Agent ;
    rdfs:label "GMAPI" .

attx:entity_9ed9b35e41785b2860d85be01da32841 a prov:Entity ;
    dcterms:source "attx:dataset1" ;
    rdfs:comment "Used Dataset" .
```

### **Step 4**
```json
{
    "provenance": {
        "context": {
            "workflowID": "ingestionwf",
            "activityID": 1,
            "step": "describeExternalDS"

        },
        "agent": {
            "ID": "UV",
            "role": "ETL"
        },
        "activity": {
            "title": "Ingestion workflow",
            "type": "DescribeStepExecution",
            "startTime": "2017-08-02T13:52:29+02:00",
            "endTime": "2017-08-02T13:52:29+02:00"
        },
        "input": [{
            "key": "inputDataset",
            "role": "Dataset"
        }],
        "output": [{
                "key": "outputDataset",
                "role": "Dataset"
            },
            {
                "key": "outputDataset2",
                "role": "Dataset"
            }
        ]
    },
    "payload": {
        "inputDataset": "attx://ds/2",
        "outputDataset": {
            "uri": "attx://ds/1",
            "title": "Harvested dataset",
            "description": "",
            "publisher": "UH",
            "license": "http://cc/0"
        },
        "outputDataset2": "attx://ds/3"
    }
}
```
Result in TURTLE format:
```turtle
attx:workflowingestionwf_activity1_UV prov:generated attx:entity_89eed4fe3b7ffb96cebe69c21e1924f0,
        attx:entity_bd8a5c26c1d27879dd0d99c573073988 ;
    prov:qualifiedGeneration attx:generated_aea66cd882d94e93a6bd77895f9294ad,
        attx:generated_c2174bf30fb706e6d6428aefe238b6bd ;
    prov:qualifiedUsage attx:used_ef083d9a523baa6099092c0ed723c5a4 ;
    prov:used attx:entity_bcefb32209068eec298676bffcbcdfa5 .

attx:generated_aea66cd882d94e93a6bd77895f9294ad a prov:Generation ;
    rdfs:comment "Generated by: workflowingestionwf_activity1" ;
    prov:entity attx:entity_89eed4fe3b7ffb96cebe69c21e1924f0 ;
    prov:hadRole attx:Dataset .

attx:generated_c2174bf30fb706e6d6428aefe238b6bd a prov:Generation ;
    rdfs:comment "Generated by: workflowingestionwf_activity1" ;
    prov:entity attx:entity_bd8a5c26c1d27879dd0d99c573073988 ;
    prov:hadRole attx:Dataset .

attx:used_ef083d9a523baa6099092c0ed723c5a4 a prov:Usage ;
    rdfs:comment "Used by: workflowingestionwf_activity1" ;
    prov:entity attx:entity_bcefb32209068eec298676bffcbcdfa5 ;
    prov:hadRole attx:Dataset .

attx:entity_89eed4fe3b7ffb96cebe69c21e1924f0 a prov:Entity ;
    dcterms:source "attx://ds/3" ;
    rdfs:comment "Generated Dataset" .

attx:entity_bcefb32209068eec298676bffcbcdfa5 a prov:Entity ;
    dcterms:source "attx://ds/2" ;
    rdfs:comment "Used Dataset" .

attx:entity_bd8a5c26c1d27879dd0d99c573073988 a attxonto:Dataset,
        prov:Entity ;
    rdfs:label "Harvested dataset" ;
    attx:description "" ;
    attx:license "http://cc/0" ;
    attx:publisher "UH" ;
    attx:title "Harvested dataset" ;
    attx:uri "attx://ds/1" ;
    dcterms:source "{u'publisher': u'UH', u'title': u'Harvested dataset', u'description': u'', u'license': u'http://cc/0', u'uri': u'attx://ds/1'}" ;
    rdfs:comment "Generated Dataset" .

attx:Dataset a prov:Role ;
    rdfs:label "Dataset" .
```
